{% extends "base.html" %}
{% block content %}
<h1>Details zu "{{ habit.name }}"</h1>

<div class="habit-info">
    <p><strong>Periodizität:</strong> {{ habit.periodicity }}</p>
    <p><strong>Erstellt am:</strong> {{ habit.created_at }}</p>
    <p><strong>Nächster Fälligkeitstag:</strong> {{ habit.due_date or '–' }}</p>
</div>

<hr>

<h3>Geplante Tage</h3>
<input type="text" id="habit_calendar" readonly>

<script>
flatpickr("#habit_calendar", {
    mode: "multiple",
    dateFormat: "Y-m-d",
    defaultDate: {{ selected_dates | tojson }},
    locale: "de",
    clickOpens: false, 
    disableMobile: true
});
</script>

<hr>

<h3>Erledigungen</h3>
{% if completions %}
    <ul>
    {% for c in completions %}
        <li>{{ c }}</li>
    {% endfor %}
    </ul>
{% else %}
    <p>Noch keine Erledigungen.</p>
{% endif %}

<form action="{{ url_for('delete_habit_route', habit_id=habit.id) }}" method="POST" onsubmit="return confirm('Willst du dieses Habit wirklich löschen?');">
    <button type="submit" class="btn btn-danger">Habit löschen</button>
</form>
<form action="{{ url_for('edit_habit', habit_id=habit.id) }}">
    <button type="submit" class="btn btn-danger">Habit bearbeiten</button>
</form>


{% endblock %}
